<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Logger: sim/generators/dbus/gen_dbus.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Logger</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_453d41f79cf1573f43ad5952de0f0538.html">sim</a>      </li>
      <li class="navelem"><a class="el" href="dir_cf74d7d42fbfa52f5658e02099ce99aa.html">generators</a>      </li>
      <li class="navelem"><a class="el" href="dir_1a677f936ce3860f4010f5f06c04f866.html">dbus</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">gen_dbus.c File Reference</div>  </div>
</div>
<div class="contents">

<p>DBus data generator.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;dbus/dbus.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="obdservicecommands_8h_source.html">obdservicecommands.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="datasource_8h_source.html">datasource.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for gen_dbus.c:</div>
<div class="dyncontent">
<div class="center"><img src="gen__dbus_8c__incl.png" border="0" usemap="#sim_2generators_2dbus_2gen__dbus_8c" alt=""/></div>
<map name="sim_2generators_2dbus_2gen__dbus_8c" id="sim_2generators_2dbus_2gen__dbus_8c">
<area shape="rect" id="node11" href="obdservicecommands_8h.html" title="list of OBD service commands" alt="" coords="314,86,474,117"/><area shape="rect" id="node16" href="datasource_8h.html" title="Data generators need to implement the functions defined herein." alt="" coords="498,86,594,117"/><area shape="rect" id="node14" href="obdconvertfunctions_8h.html" title="Functions to convert from OBD output to actual values Functions declared in this file are named by th..." alt="" coords="320,166,469,197"/></map>
</div>
</div>
<p><a href="gen__dbus_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdbus__simvals.html">dbus_simvals</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Mappings and most-recently-seen values are stored in this list.  <a href="structdbus__simvals.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdbus__gen.html">dbus_gen</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the void * generator.  <a href="structdbus__gen.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static DBusHandlerResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#abecb33feb1383a59673d786fa8e0dc9c">dbus_simgen_msgfilter</a> (DBusConnection *connection, DBusMessage *message, void *gen)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is what parses messages.  <a href="#abecb33feb1383a59673d786fa8e0dc9c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdbus__simvals.html">dbus_simvals</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#a1a7ad62a55ca18f05f205733e2da2463">dbus_simgen_findsimval_from</a> (void *gen, int from)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the dbus_simval for this map_from value.  <a href="#a1a7ad62a55ca18f05f205733e2da2463"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdbus__simvals.html">dbus_simvals</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#a9c3b422afa4d4914d2a9d861dd8b7a1b">dbus_simgen_findsimval_to</a> (void *gen, int to)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the dbus_simval for this map_to (PID) value.  <a href="#a9c3b422afa4d4914d2a9d861dd8b7a1b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#ae7a548b4e14943172fabee42a19d3461">dbus_simgen_flushqueue</a> (struct <a class="el" href="structdbus__gen.html">dbus_gen</a> *gen, int timems)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the queue of dbus messages waiting for us.  <a href="#ae7a548b4e14943172fabee42a19d3461"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#a808c10a8808f26d512322db689c1f583">dbus_simgen_name</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#a79b7fe9e7c8fc98da72242464b2669a7">dbus_simgen_longdesc</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#a2baba77f3dca08b73ab31f5ee47a7f47">dbus_simgen_create</a> (void **gen, const char *seed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#af6a91df5cbe514cf5ea6a55a747e6696">dbus_simgen_destroy</a> (void *gen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#a95691be2d01853f5f026625fea1055cf">dbus_simgen_getvalue</a> (void *gen, unsigned int mode, unsigned int PID, unsigned int *A, unsigned int *B, unsigned int *C, unsigned int *D)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#ae38c1ae93d4a2dbf1ef78337a6bdf6e9">dbus_simgen_idle</a> (void *gen, int idlems)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structobdsim__generator.html">obdsim_generator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gen__dbus_8c.html#a2377e7ac3d5e33179294bf5c4d279ba5">obdsimgen_dbus</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>DBus data generator. </p>

<p>Definition in file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a2baba77f3dca08b73ab31f5ee47a7f47"></a><!-- doxytag: member="gen_dbus.c::dbus_simgen_create" ref="a2baba77f3dca08b73ab31f5ee47a7f47" args="(void **gen, const char *seed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dbus_simgen_create </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>gen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>seed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00081">81</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
<div class="fragment"><pre class="fragment">                                                     {
    <span class="comment">// Read config file</span>

    <span class="keywordtype">char</span> dbusinterface[1024] = <span class="stringliteral">&quot;\0&quot;</span>; <span class="comment">//&lt; The dbus interface name</span>
    <span class="keywordtype">char</span> dbuspath[1024] = <span class="stringliteral">&quot;\0&quot;</span>; <span class="comment">//&lt; The dbus path</span>
    <span class="keywordtype">char</span> dbusbus[1024] = <span class="stringliteral">&quot;\0&quot;</span>; <span class="comment">//&lt; The dbus bus [system or session]</span>
    <span class="keywordtype">char</span> dbusmember[1024] = <span class="stringliteral">&quot;\0&quot;</span>; <span class="comment">//&lt; The dbus member</span>

    <span class="keyword">struct </span><a class="code" href="structdbus__simvals.html" title="Mappings and most-recently-seen values are stored in this list.">dbus_simvals</a> *simval_list = NULL;

    <span class="keywordflow">if</span>(NULL == seed || <span class="charliteral">&#39;\0&#39;</span> == *seed) {
        fprintf(stderr, <span class="stringliteral">&quot;Must pass a filename to a config file as the seed\n&quot;</span>);
        <span class="keywordflow">return</span> 1;
    }
    FILE *configfile = fopen(seed, <span class="stringliteral">&quot;r&quot;</span>);
    <span class="keywordflow">if</span>(NULL == configfile) {
        fprintf(stderr,<span class="stringliteral">&quot;Couldn&#39;t open dbus config file %s\n&quot;</span>, seed);
        <span class="keywordflow">return</span> 1;
    }

    <span class="keywordtype">char</span> line[1024]; <span class="comment">// Single line of config file</span>

    <span class="keywordtype">int</span> <a class="code" href="structdbus__simvals.html#a4d7a64c841848f77ceda82b60e9c77ec">map_from</a>; <span class="comment">// Value to map PIDs from</span>
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> map_to; <span class="comment">// Value to map PIDs to</span>

    <span class="keywordflow">while</span>(NULL != (fgets(line, <span class="keyword">sizeof</span>(line), configfile))) {
        <span class="keywordflow">if</span>(<span class="charliteral">&#39;#&#39;</span> == *line) {
            <span class="comment">// Comment</span>
            <span class="keywordflow">continue</span>;
        }

        <span class="keywordflow">if</span>(0 != sscanf(line, <span class="stringliteral">&quot;interface=%1023s&quot;</span>, dbusinterface)) {
            printf(<span class="stringliteral">&quot;DBus Config, interface=%s\n&quot;</span>, dbusinterface);
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(0 != sscanf(line, <span class="stringliteral">&quot;path=%1023s&quot;</span>, dbuspath)) {
            printf(<span class="stringliteral">&quot;DBus Config, path=%s\n&quot;</span>, dbuspath);
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(0 != sscanf(line, <span class="stringliteral">&quot;bus=%1023s&quot;</span>, dbusbus)) {
            printf(<span class="stringliteral">&quot;DBus Config, bus=%s\n&quot;</span>, dbusbus);
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(0 != sscanf(line, <span class="stringliteral">&quot;member=%1023s&quot;</span>, dbusmember)) {
            printf(<span class="stringliteral">&quot;DBus Config, member=%s\n&quot;</span>, dbusmember);
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(2 == sscanf(line, <span class="stringliteral">&quot;map %i -&gt; %x&quot;</span>, &amp;map_from, &amp;map_to)) {
            <span class="keyword">struct </span><a class="code" href="structobdservicecmd.html" title="structure to hold OBD service commands">obdservicecmd</a> *cmd = <a class="code" href="obdservicecommands_8c.html#a05b8663c29e16cee47f4f3e26440a6bf" title="Return the obdservicecmd struct for the requested db_column name.">obdGetCmdForPID</a>(map_to);

            printf(<span class="stringliteral">&quot;DBus Config, map %i -&gt; 0x%02X (%s)\n&quot;</span>, map_from, map_to, cmd-&gt;<a class="code" href="structobdservicecmd.html#af653d2533701398d0b2633ba91eabe18" title="Human friendly name. http://www.kbmsystems.net/obd_tech.htm.">human_name</a>);

            <span class="keywordflow">if</span>(NULL == cmd) {
                fprintf(stderr, <span class="stringliteral">&quot;DBus Config, Cannot find obdservice command for PID %02X\n&quot;</span>, map_to);
                <span class="keywordflow">continue</span>;
            }

            <span class="keyword">struct </span><a class="code" href="structdbus__simvals.html" title="Mappings and most-recently-seen values are stored in this list.">dbus_simvals</a> *v = (<span class="keyword">struct </span><a class="code" href="structdbus__simvals.html" title="Mappings and most-recently-seen values are stored in this list.">dbus_simvals</a> *)malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structdbus__simvals.html" title="Mappings and most-recently-seen values are stored in this list.">dbus_simvals</a>));
            v-&gt;<a class="code" href="structdbus__simvals.html#a4d7a64c841848f77ceda82b60e9c77ec">map_from</a> = <a class="code" href="structdbus__simvals.html#a4d7a64c841848f77ceda82b60e9c77ec">map_from</a>;
            v-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a> = map_to;
            v-&gt;<a class="code" href="structdbus__simvals.html#ab5d1e03e7d1b79e1d4655cca8d5e2f66">pid_cmd</a> = cmd;
            v-&gt;<a class="code" href="structdbus__simvals.html#af0336144a36c54b60069e01244c13708">most_recent</a> = 0;
            v-&gt;<a class="code" href="structdbus__simvals.html#a0f60dde9207fccac451fb70af5d221fc">next</a> = NULL;
            <span class="keywordflow">if</span>(NULL == simval_list) {
                simval_list = v;
            } <span class="keywordflow">else</span> {
                v-&gt;<a class="code" href="structdbus__simvals.html#a0f60dde9207fccac451fb70af5d221fc">next</a> = simval_list;
                simval_list = v;
            }

            
        }
    }

    fclose(configfile);
    <span class="comment">// Done reading configfile</span>

    <span class="keywordflow">if</span>(NULL == simval_list) {
        fprintf(stderr,<span class="stringliteral">&quot;Couldn&#39;t find any mappings in DBus config file, cannot continue\n&quot;</span>);
        <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">if</span>(0 == strlen(dbusinterface)) {
        fprintf(stderr,<span class="stringliteral">&quot;DBus config file must contain interface\n&quot;</span>);
        <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">if</span>(0 == strlen(dbuspath)) {
        fprintf(stderr,<span class="stringliteral">&quot;DBus config file must contain path\n&quot;</span>);
        <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">if</span>(0 == strlen(dbusbus)) {
        fprintf(stderr,<span class="stringliteral">&quot;DBus config file must contain bus [system or session]\n&quot;</span>);
        <span class="keywordflow">return</span> 1;
    }
    <span class="keywordflow">if</span>(0 == strlen(dbusmember)) {
        fprintf(stderr,<span class="stringliteral">&quot;DBus config file must contain member\n&quot;</span>);
        <span class="keywordflow">return</span> 1;
    }

    <span class="keywordtype">char</span> simgen_match[4096];
    snprintf(simgen_match, <span class="keyword">sizeof</span>(simgen_match),
        <span class="stringliteral">&quot;type=&#39;signal&#39;,interface=&#39;%s&#39;,path=&#39;%s&#39;,member=&#39;%s&#39;&quot;</span>,
        dbusinterface, dbuspath, dbusmember);


    <span class="comment">// Create the void *gen</span>
    <span class="keyword">struct </span><a class="code" href="structdbus__gen.html" title="This is the void * generator.">dbus_gen</a> *g = (<span class="keyword">struct </span><a class="code" href="structdbus__gen.html" title="This is the void * generator.">dbus_gen</a> *)malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structdbus__gen.html" title="This is the void * generator.">dbus_gen</a>));
    <span class="keywordflow">if</span>(NULL == g) {
        fprintf(stderr,<span class="stringliteral">&quot;Couldn&#39;t allocate memory for dbus generator\n&quot;</span>);
        <span class="keywordflow">return</span> 1;
    }

    g-&gt;<a class="code" href="structdbus__gen.html#a55da7b430a505b2c4336faca41dfa8b5">supportedpids_00</a> = 0x01;
    g-&gt;<a class="code" href="structdbus__gen.html#ab78b4d0ecf6c118f23411f025a03a6d3">supportedpids_20</a> = 0x01;
    g-&gt;<a class="code" href="structdbus__gen.html#a539b356d0060ad8ab6ccb6ba56fda5cc">supportedpids_40</a> = 0x01;
    g-&gt;<a class="code" href="structdbus__gen.html#aa1090fb77104ad502a5c26c256f25ef4">supportedpids_60</a> = 0x00;

    <span class="comment">// Iterate across our PIDs, figuring out which ones we support</span>
    <span class="keyword">struct </span><a class="code" href="structdbus__simvals.html" title="Mappings and most-recently-seen values are stored in this list.">dbus_simvals</a> *pidtest = simval_list;
    
    <span class="keywordflow">for</span>(; pidtest!=NULL; pidtest=pidtest-&gt;<a class="code" href="structdbus__simvals.html#a0f60dde9207fccac451fb70af5d221fc">next</a>) {
        <span class="keywordflow">if</span>(pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a> &lt;= 0x20) {
            g-&gt;<a class="code" href="structdbus__gen.html#a55da7b430a505b2c4336faca41dfa8b5">supportedpids_00</a> |= ((<span class="keywordtype">unsigned</span> long)1&lt;&lt;(0x20 - pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a>));
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a> &gt; 0x20 &amp;&amp; pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a> &lt;= 0x40) {
            g-&gt;<a class="code" href="structdbus__gen.html#ab78b4d0ecf6c118f23411f025a03a6d3">supportedpids_20</a> |= ((<span class="keywordtype">unsigned</span> long)1&lt;&lt;(0x40 - pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a>));
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a> &gt; 0x40 &amp;&amp; pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a> &lt;= 0x60) {
            g-&gt;<a class="code" href="structdbus__gen.html#a539b356d0060ad8ab6ccb6ba56fda5cc">supportedpids_40</a> |= ((<span class="keywordtype">unsigned</span> long)1&lt;&lt;(0x60 - pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a>));
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a> &gt; 0x60 &amp;&amp;  pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a> &lt;= 0x80) {
            g-&gt;<a class="code" href="structdbus__gen.html#aa1090fb77104ad502a5c26c256f25ef4">supportedpids_60</a> |= ((<span class="keywordtype">unsigned</span> long)1&lt;&lt;(0x80 - pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a>));
        } <span class="keywordflow">else</span> {
            fprintf(stderr,<span class="stringliteral">&quot;Don&#39;t support PIDs this high in sim yet: %i\n&quot;</span>, pidtest-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a>);
        }
    }



    <span class="comment">// Set up dbus stuff</span>
    DBusConnection *dc;
    DBusError err;

    dbus_error_init(&amp;err);
    <span class="comment">// At the moment, we assume that if they didn&#39;t ask for the</span>
    <span class="comment">//   system queue, the want the session one. DBus support multiple</span>
    <span class="comment">//   queues, so this isn&#39;t guaraunteed, but it does work in 99.9%</span>
    <span class="comment">//   of cases.</span>
    dc = dbus_bus_get(0==strcmp(dbusbus, <span class="stringliteral">&quot;system&quot;</span>)?DBUS_BUS_SYSTEM:DBUS_BUS_SESSION, &amp;err);
    <span class="keywordflow">if</span> (NULL == dc) {
        fprintf(stderr, <span class="stringliteral">&quot;Error getting dbus %s bus: %s\n&quot;</span>, dbusbus, err.message);
        <span class="keywordflow">return</span> 1;
    }

    dbus_bus_add_match (dc, simgen_match, &amp;err);
    dbus_connection_add_filter (dc, <a class="code" href="gen__dbus_8c.html#abecb33feb1383a59673d786fa8e0dc9c" title="This is what parses messages.">dbus_simgen_msgfilter</a>, g, NULL);

    dbus_connection_flush(dc);
    <span class="comment">// Done setting up dbus</span>


    g-&gt;<a class="code" href="structdbus__gen.html#a1b1876b4737696ad6a09a412bafe2e57">dbusconn</a> = dc;
    g-&gt;<a class="code" href="structdbus__gen.html#a5a3d6f1530c6795997364c57f2a931f4">simval_list</a> = simval_list;

    *gen = g;
    <span class="keywordflow">return</span> 0;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gen__dbus_8c_a2baba77f3dca08b73ab31f5ee47a7f47_cgraph.png" border="0" usemap="#gen__dbus_8c_a2baba77f3dca08b73ab31f5ee47a7f47_cgraph" alt=""/></div>
<map name="gen__dbus_8c_a2baba77f3dca08b73ab31f5ee47a7f47_cgraph" id="gen__dbus_8c_a2baba77f3dca08b73ab31f5ee47a7f47_cgraph">
<area shape="rect" id="node3" href="gen__dbus_8c.html#abecb33feb1383a59673d786fa8e0dc9c" title="This is what parses messages." alt="" coords="197,5,352,35"/><area shape="rect" id="node7" href="obdservicecommands_8c.html#a05b8663c29e16cee47f4f3e26440a6bf" title="Return the obdservicecmd struct for the requested db_column name." alt="" coords="209,58,340,89"/><area shape="rect" id="node5" href="gen__dbus_8c.html#a1a7ad62a55ca18f05f205733e2da2463" title="Find the dbus_simval for this map_from value." alt="" coords="400,5,597,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af6a91df5cbe514cf5ea6a55a747e6696"></a><!-- doxytag: member="gen_dbus.c::dbus_simgen_destroy" ref="af6a91df5cbe514cf5ea6a55a747e6696" args="(void *gen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dbus_simgen_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>gen</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00237">237</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
<div class="fragment"><pre class="fragment">                                    {
    free(gen);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1a7ad62a55ca18f05f205733e2da2463"></a><!-- doxytag: member="gen_dbus.c::dbus_simgen_findsimval_from" ref="a1a7ad62a55ca18f05f205733e2da2463" args="(void *gen, int from)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdbus__simvals.html">dbus_simvals</a> * dbus_simgen_findsimval_from </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>gen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find the dbus_simval for this map_from value. </p>

<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00348">348</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
<div class="fragment"><pre class="fragment">                                                                      {
    <span class="keyword">struct </span><a class="code" href="structdbus__gen.html" title="This is the void * generator.">dbus_gen</a> *g = (<span class="keyword">struct </span><a class="code" href="structdbus__gen.html" title="This is the void * generator.">dbus_gen</a> *)gen;
    <span class="keywordflow">if</span>(NULL == g) <span class="keywordflow">return</span> NULL;

    <span class="keyword">struct </span><a class="code" href="structdbus__simvals.html" title="Mappings and most-recently-seen values are stored in this list.">dbus_simvals</a> *s = g-&gt;<a class="code" href="structdbus__gen.html#a5a3d6f1530c6795997364c57f2a931f4">simval_list</a>;

    <span class="keywordflow">for</span>(; s!=NULL; s=s-&gt;<a class="code" href="structdbus__simvals.html#a0f60dde9207fccac451fb70af5d221fc">next</a>) {
        <span class="keywordflow">if</span>(s-&gt;<a class="code" href="structdbus__simvals.html#a4d7a64c841848f77ceda82b60e9c77ec">map_from</a> == from) {
            <span class="keywordflow">return</span> s;
        }
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c3b422afa4d4914d2a9d861dd8b7a1b"></a><!-- doxytag: member="gen_dbus.c::dbus_simgen_findsimval_to" ref="a9c3b422afa4d4914d2a9d861dd8b7a1b" args="(void *gen, int to)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdbus__simvals.html">dbus_simvals</a> * dbus_simgen_findsimval_to </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>gen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find the dbus_simval for this map_to (PID) value. </p>

<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00362">362</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {
    <span class="keyword">struct </span><a class="code" href="structdbus__gen.html" title="This is the void * generator.">dbus_gen</a> *g = (<span class="keyword">struct </span><a class="code" href="structdbus__gen.html" title="This is the void * generator.">dbus_gen</a> *)gen;
    <span class="keywordflow">if</span>(NULL == g) <span class="keywordflow">return</span> NULL;

    <span class="keyword">struct </span><a class="code" href="structdbus__simvals.html" title="Mappings and most-recently-seen values are stored in this list.">dbus_simvals</a> *s = g-&gt;<a class="code" href="structdbus__gen.html#a5a3d6f1530c6795997364c57f2a931f4">simval_list</a>;

    <span class="keywordflow">for</span>(; s!=NULL; s=s-&gt;<a class="code" href="structdbus__simvals.html#a0f60dde9207fccac451fb70af5d221fc">next</a>) {
        <span class="keywordflow">if</span>(s-&gt;<a class="code" href="structdbus__simvals.html#a7bb6d8077a62f3e4cd796224bb6a8454">pid</a> == to) {
            <span class="keywordflow">return</span> s;
        }
    }
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae7a548b4e14943172fabee42a19d3461"></a><!-- doxytag: member="gen_dbus.c::dbus_simgen_flushqueue" ref="ae7a548b4e14943172fabee42a19d3461" args="(struct dbus_gen *gen, int timems)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dbus_simgen_flushqueue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdbus__gen.html">dbus_gen</a> *&#160;</td>
          <td class="paramname"><em>gen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timems</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Flush the queue of dbus messages waiting for us. </p>

<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00376">376</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
<div class="fragment"><pre class="fragment">                                                              {
    <span class="comment">// dbus_connection_read_write(gen-&gt;dbusconn, 0);</span>
    dbus_connection_read_write_dispatch (gen-&gt;<a class="code" href="structdbus__gen.html#a1b1876b4737696ad6a09a412bafe2e57">dbusconn</a>, timems);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a95691be2d01853f5f026625fea1055cf"></a><!-- doxytag: member="gen_dbus.c::dbus_simgen_getvalue" ref="a95691be2d01853f5f026625fea1055cf" args="(void *gen, unsigned int mode, unsigned int PID, unsigned int *A, unsigned int *B, unsigned int *C, unsigned int *D)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dbus_simgen_getvalue </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>gen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>PID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>D</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00241">241</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                                                             {

    <span class="keyword">struct </span><a class="code" href="structdbus__gen.html" title="This is the void * generator.">dbus_gen</a> *g = gen;

    <a class="code" href="gen__dbus_8c.html#ae7a548b4e14943172fabee42a19d3461" title="Flush the queue of dbus messages waiting for us.">dbus_simgen_flushqueue</a>(g, 1);

    <span class="keywordflow">if</span>(0x00 == PID || 0x20 == PID || 0x40 == PID || 0x60 == PID) {
        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> bits;
        <span class="keywordflow">if</span>(0x00 == PID) bits = g-&gt;<a class="code" href="structdbus__gen.html#a55da7b430a505b2c4336faca41dfa8b5">supportedpids_00</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(0x20 == PID) bits = g-&gt;<a class="code" href="structdbus__gen.html#ab78b4d0ecf6c118f23411f025a03a6d3">supportedpids_20</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(0x40 == PID) bits = g-&gt;<a class="code" href="structdbus__gen.html#a539b356d0060ad8ab6ccb6ba56fda5cc">supportedpids_40</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(0x60 == PID) bits = g-&gt;<a class="code" href="structdbus__gen.html#aa1090fb77104ad502a5c26c256f25ef4">supportedpids_60</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;

        *D = bits &amp; 0xFF;
        bits &gt;&gt;= 8;
        *C = bits &amp; 0xFF;
        bits &gt;&gt;= 8;
        *B = bits &amp; 0xFF;
        bits &gt;&gt;= 8;
        *A = bits &amp; 0xFF;

        <span class="keywordflow">return</span> 4;
    }

    <span class="keyword">struct </span><a class="code" href="structdbus__simvals.html" title="Mappings and most-recently-seen values are stored in this list.">dbus_simvals</a> *v = <a class="code" href="gen__dbus_8c.html#a9c3b422afa4d4914d2a9d861dd8b7a1b" title="Find the dbus_simval for this map_to (PID) value.">dbus_simgen_findsimval_to</a>(gen, PID);
    <span class="keywordflow">if</span>(NULL == v) <span class="keywordflow">return</span> 0;

    <span class="keywordflow">return</span> v-&gt;<a class="code" href="structdbus__simvals.html#ab5d1e03e7d1b79e1d4655cca8d5e2f66">pid_cmd</a>-&gt;<a class="code" href="structobdservicecmd.html#a883c4e0104f881237dcd31cf58f4beb2" title="Function to convert a useful number back to OBD values.">convrev</a>(v-&gt;<a class="code" href="structdbus__simvals.html#af0336144a36c54b60069e01244c13708">most_recent</a>, A, B, C, D);
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gen__dbus_8c_a95691be2d01853f5f026625fea1055cf_cgraph.png" border="0" usemap="#gen__dbus_8c_a95691be2d01853f5f026625fea1055cf_cgraph" alt=""/></div>
<map name="gen__dbus_8c_a95691be2d01853f5f026625fea1055cf_cgraph" id="gen__dbus_8c_a95691be2d01853f5f026625fea1055cf_cgraph">
<area shape="rect" id="node3" href="gen__dbus_8c.html#a9c3b422afa4d4914d2a9d861dd8b7a1b" title="Find the dbus_simval for this map_to (PID) value." alt="" coords="209,5,391,35"/><area shape="rect" id="node5" href="gen__dbus_8c.html#ae7a548b4e14943172fabee42a19d3461" title="Flush the queue of dbus messages waiting for us." alt="" coords="216,58,384,89"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae38c1ae93d4a2dbf1ef78337a6bdf6e9"></a><!-- doxytag: member="gen_dbus.c::dbus_simgen_idle" ref="ae38c1ae93d4a2dbf1ef78337a6bdf6e9" args="(void *gen, int idlems)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dbus_simgen_idle </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>gen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idlems</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00272">272</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
<div class="fragment"><pre class="fragment">                                            {
    <span class="keyword">struct </span><a class="code" href="structdbus__gen.html" title="This is the void * generator.">dbus_gen</a> *g = gen;

    <a class="code" href="gen__dbus_8c.html#ae7a548b4e14943172fabee42a19d3461" title="Flush the queue of dbus messages waiting for us.">dbus_simgen_flushqueue</a>(g, idlems);
    <span class="keywordflow">return</span> 0;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gen__dbus_8c_ae38c1ae93d4a2dbf1ef78337a6bdf6e9_cgraph.png" border="0" usemap="#gen__dbus_8c_ae38c1ae93d4a2dbf1ef78337a6bdf6e9_cgraph" alt=""/></div>
<map name="gen__dbus_8c_ae38c1ae93d4a2dbf1ef78337a6bdf6e9_cgraph" id="gen__dbus_8c_ae38c1ae93d4a2dbf1ef78337a6bdf6e9_cgraph">
<area shape="rect" id="node3" href="gen__dbus_8c.html#ae7a548b4e14943172fabee42a19d3461" title="Flush the queue of dbus messages waiting for us." alt="" coords="181,5,349,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a79b7fe9e7c8fc98da72242464b2669a7"></a><!-- doxytag: member="gen_dbus.c::dbus_simgen_longdesc" ref="a79b7fe9e7c8fc98da72242464b2669a7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* dbus_simgen_longdesc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00076">76</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Accept signals from dbus\n&quot;</span>
        <span class="stringliteral">&quot;Seed: &lt;config file&gt;&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abecb33feb1383a59673d786fa8e0dc9c"></a><!-- doxytag: member="gen_dbus.c::dbus_simgen_msgfilter" ref="abecb33feb1383a59673d786fa8e0dc9c" args="(DBusConnection *connection, DBusMessage *message, void *gen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DBusHandlerResult dbus_simgen_msgfilter </td>
          <td>(</td>
          <td class="paramtype">DBusConnection *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DBusMessage *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>gen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is what parses messages. </p>

<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00279">279</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
<div class="fragment"><pre class="fragment">                                         {

    <span class="comment">// printf(&quot;In Message Filter\n&quot;);</span>

    DBusMessageIter args;
    dbus_message_iter_init_append(message, &amp;args);
    
    <span class="keywordflow">if</span> (!dbus_message_iter_init(message, &amp;args))
        fprintf(stderr, <span class="stringliteral">&quot;Message has no arguments!\n&quot;</span>); 

    <span class="keywordtype">int</span> key;  <span class="comment">// We accept message tuples, an integer key</span>
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ukey; <span class="comment">// Or unsigned [which we convert]</span>
    <span class="keywordtype">double</span> value_f; <span class="comment">// And a floating point number (ints are converted)</span>

    
    <span class="keywordflow">switch</span>(dbus_message_iter_get_arg_type(&amp;args)) {
        <span class="keywordflow">case</span> DBUS_TYPE_INT32:
            dbus_message_iter_get_basic(&amp;args, &amp;key);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> DBUS_TYPE_UINT32:
            dbus_message_iter_get_basic(&amp;args, &amp;ukey);
            key = (int)ukey;
            <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
            fprintf(stderr,<span class="stringliteral">&quot;First argument isn&#39;t of type int\n&quot;</span>);
            <span class="keywordflow">return</span> DBUS_HANDLER_RESULT_NOT_YET_HANDLED;
    }

    <span class="keywordflow">if</span>(dbus_message_iter_next(&amp;args)) {
        <span class="keywordflow">switch</span>(dbus_message_iter_get_arg_type(&amp;args)) {
            <span class="keywordflow">case</span> DBUS_TYPE_INT32: {
                <span class="keywordtype">int</span> value_i;
                dbus_message_iter_get_basic(&amp;args, &amp;value_i);
                value_f = value_i; <span class="comment">// Set it in our floating point number</span>
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">case</span> DBUS_TYPE_UINT32: {
                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> value_ui;
                dbus_message_iter_get_basic(&amp;args, &amp;value_ui);
                value_f = value_ui; <span class="comment">// Set it in our floating point number</span>
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">case</span> DBUS_TYPE_DOUBLE:
                dbus_message_iter_get_basic(&amp;args, &amp;value_f);
                <span class="keywordflow">break</span>;
            <span class="keywordflow">default</span>:
                fprintf(stderr, <span class="stringliteral">&quot;Second value in dbus message tuple must be number\n&quot;</span>);
                <span class="keywordflow">return</span> DBUS_HANDLER_RESULT_NOT_YET_HANDLED;
                <span class="keywordflow">break</span>;
        }
    } <span class="keywordflow">else</span> {
        fprintf(stderr, <span class="stringliteral">&quot;Must have two values in dbus message\n&quot;</span>);
        <span class="keywordflow">return</span> DBUS_HANDLER_RESULT_NOT_YET_HANDLED;
    }

    <span class="comment">// printf(&quot;DBus message contained everything we need: %i -&gt; %f\n&quot;, key, value_f);</span>

    <span class="keyword">struct </span><a class="code" href="structdbus__simvals.html" title="Mappings and most-recently-seen values are stored in this list.">dbus_simvals</a> *v = <a class="code" href="gen__dbus_8c.html#a1a7ad62a55ca18f05f205733e2da2463" title="Find the dbus_simval for this map_from value.">dbus_simgen_findsimval_from</a>(gen, key);
    <span class="keywordflow">if</span>(NULL == v) {
        fprintf(stderr, <span class="stringliteral">&quot;DBus Message tuple with an unconfigured key (%i)\n&quot;</span>, key);
        <span class="keywordflow">return</span> DBUS_HANDLER_RESULT_NOT_YET_HANDLED;
    }

    v-&gt;<a class="code" href="structdbus__simvals.html#af0336144a36c54b60069e01244c13708">most_recent</a> = value_f;

    <span class="keywordflow">return</span> DBUS_HANDLER_RESULT_HANDLED;
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="gen__dbus_8c_abecb33feb1383a59673d786fa8e0dc9c_cgraph.png" border="0" usemap="#gen__dbus_8c_abecb33feb1383a59673d786fa8e0dc9c_cgraph" alt=""/></div>
<map name="gen__dbus_8c_abecb33feb1383a59673d786fa8e0dc9c_cgraph" id="gen__dbus_8c_abecb33feb1383a59673d786fa8e0dc9c_cgraph">
<area shape="rect" id="node3" href="gen__dbus_8c.html#a1a7ad62a55ca18f05f205733e2da2463" title="Find the dbus_simval for this map_from value." alt="" coords="208,5,405,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a808c10a8808f26d512322db689c1f583"></a><!-- doxytag: member="gen_dbus.c::dbus_simgen_name" ref="a808c10a8808f26d512322db689c1f583" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* dbus_simgen_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00072">72</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>
<div class="fragment"><pre class="fragment">                               {
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;DBus&quot;</span>;
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a2377e7ac3d5e33179294bf5c4d279ba5"></a><!-- doxytag: member="gen_dbus.c::obdsimgen_dbus" ref="a2377e7ac3d5e33179294bf5c4d279ba5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structobdsim__generator.html">obdsim_generator</a> <a class="el" href="gen__dbus_8c.html#a2377e7ac3d5e33179294bf5c4d279ba5">obdsimgen_dbus</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    <a class="code" href="gen__dbus_8c.html#a808c10a8808f26d512322db689c1f583">dbus_simgen_name</a>,
    <a class="code" href="gen__dbus_8c.html#a79b7fe9e7c8fc98da72242464b2669a7">dbus_simgen_longdesc</a>,
    <a class="code" href="gen__dbus_8c.html#a2baba77f3dca08b73ab31f5ee47a7f47">dbus_simgen_create</a>,
    <a class="code" href="gen__dbus_8c.html#af6a91df5cbe514cf5ea6a55a747e6696">dbus_simgen_destroy</a>,
    <a class="code" href="gen__dbus_8c.html#a95691be2d01853f5f026625fea1055cf">dbus_simgen_getvalue</a>,
    <a class="code" href="gen__dbus_8c.html#ae38c1ae93d4a2dbf1ef78337a6bdf6e9">dbus_simgen_idle</a>,
    NULL,
    NULL
}
</pre></div>
<p>Definition at line <a class="el" href="gen__dbus_8c_source.html#l00382">382</a> of file <a class="el" href="gen__dbus_8c_source.html">gen_dbus.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Apr 8 2012 21:46:30 for Logger by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
